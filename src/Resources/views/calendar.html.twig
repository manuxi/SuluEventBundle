{% extends "body.html.twig" %}

{% block content %}
    {% set settings = load_event_settings() %}
    
    {% if toggle_calendar %}
        {% if eventsSettings is not defined %}
            {% set eventsSettings = load_event_settings() %}
        {% endif %}

        <div class="col-12 event-calendar justify-content-{{ alignment_content }}" id="event-calendar"
             data-events-url="{{ path('sulu_event.api.calendar', {
                 '_locale': app.request.locale,
                 'dataId': events.dataId|default(0),
                 'includeSubFolders': events.includeSubFolders|default(0),
                 'categories': events.categories|default([]),
                 'tags': events.tags|default([])
             }) }}"

             data-initial-view="{{ calendarView|default('dayGridMonth') }}"
             data-locale="{{ app.request.locale }}"
             data-week-numbers="{{ eventsSettings.showWeekNumbers ? 'true' : 'false' }}"
             data-weekends="{{ eventsSettings.showWeekends ? 'true' : 'false' }}"
             data-event-limit="{{ eventsSettings.eventLimitPerDay|default(3) }}"
             data-limit-to-events="{{ eventsSettings.limitToEventRange ? 'true' : 'false' }}"
             data-first-day="{{ eventsSettings.calendarStartDay|default(1) }}"
             data-event-color="{{ eventsSettings.eventColor|default('#ccc') }}"
             data-toggle-view="{{ eventsSettings.toggleCalendarView ? 'true' : 'false' }}"
             data-toggle-location="{{ eventsSettings.showCalendarEventLocation ? 'true' : 'false' }}"
             data-toggle-type="{{ eventsSettings.showCalendarEventType ? 'true' : 'false' }}"
             data-allowed-views="{{ eventsSettings.allowedCalendarViews|join(',') }}">

        </div>
    {% else %}
        {# Fallback to standard list view if calendar is disabled #}
        <div class="container my-5">
            <h1>{{ 'sulu_event.events'|trans }}</h1>
            {# Your standard event list code here #}
        </div>
    {% endif %}
{% endblock %}
